[SERVICE]
    Flush        5
    Daemon       Off
    Log_Level    debug
    Parsers_File parsers.conf
    Plugins_File plugins.conf
    HTTP_Server  On
    HTTP_Listen  0.0.0.0
    HTTP_Port    2020
    Health_Check On

# OpenTelemetry input for receiving OTLP data (both gRPC and HTTP)
[INPUT]
    Name          opentelemetry
    Tag           otel
    Listen        0.0.0.0
    Port          4317
    buffer_max_size 50MB
    buffer_chunk_size 10MB

# HTTP input for receiving OTLP JSON data
[INPUT]
    Name          http
    Tag           otlp.traces
    Listen        0.0.0.0
    Port          4318
    buffer_max_size 50MB
    buffer_chunk_size 10MB

# Additional HTTP input for metrics if needed
[INPUT]
    Name          http
    Tag           otlp.metrics
    Listen        0.0.0.0
    Port          4319
    buffer_max_size 50MB
    buffer_chunk_size 10MB

# Add metadata to all records
[FILTER]
    Name          record_modifier
    Match         *
    Record        environment demo
    Record        source otel-demo
    Record        fluent_bit_version 4.2.1



# Output OTEL gRPC Logs to Parseable
[OUTPUT]
    Name          parseable
    Match         *_logs
    Host          anton
    Port          8010
    TLS           Off
    Stream        grpc-logs
    data_type     logs
    log_source    otel-logs
    auth_header   Basic YWRtaW46YWRtaW4=
    compress      gzip
    Retry_Limit   3

# Output OTEL gRPC Metrics to Parseable
[OUTPUT]
    Name          parseable
    Match         *_metrics
    Host          anton
    Port          8010
    TLS           Off
    Stream        grpc-metrics
    data_type     otel-metric
    log_source    otel-metrics
    auth_header   Basic YWRtaW46YWRtaW4=
    compress      gzip
    Retry_Limit   3

# Output OTEL gRPC Traces to Parseable (Match trace tags)
[OUTPUT]
    Name          parseable
    Match         *_traces
    Host          anton
    Port          8010
    TLS           Off
    Stream        grpc-traces
    data_type     otel-trace
    log_source    otel-traces
    auth_header   Basic YWRtaW46YWRtaW4=
    compress      gzip
    Retry_Limit   3

# Also output to stdout for debugging
[OUTPUT]
    Name          stdout
    Match         *
    Format        json_lines
